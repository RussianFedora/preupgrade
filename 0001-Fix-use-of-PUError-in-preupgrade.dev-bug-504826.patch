From 77e1de2d981671d0387562599054afbfc858eb1e Mon Sep 17 00:00:00 2001
From: Will Woods <wwoods@redhat.com>
Date: Tue, 9 Jun 2009 17:31:16 -0400
Subject: [PATCH] Fix use of PUError in preupgrade.dev - bug 504826

---
 preupgrade/__init__.py |    8 +-------
 preupgrade/dev.py      |    1 +
 preupgrade/error.py    |   24 ++++++++++++++++++++++++
 3 files changed, 26 insertions(+), 7 deletions(-)
 create mode 100644 preupgrade/error.py

diff --git a/preupgrade/__init__.py b/preupgrade/__init__.py
index f87e6fb..4b892f8 100644
--- a/preupgrade/__init__.py
+++ b/preupgrade/__init__.py
@@ -29,6 +29,7 @@ from urlgrabber.grabber import URLGrabber, URLGrabError
 
 import preupgrade.misc as misc
 import preupgrade.dev as dev
+from preupgrade.error import PUError
 
 import yum, rpm
 import yum.Errors
@@ -51,13 +52,6 @@ else:
 runfile = "/var/run/preupgrade"
 repofile = "/var/run/preupgrade.repo"
 
-class PUError(Exception):
-    def __init__(self, value=None):
-        Exception.__init__(self)
-        self.value = value
-    def __str__(self):
-        return "%s" %(self.value,)
-
 class PreUpgrade(yum.YumBase):
     def __init__(self, release=None, configfile=releasesfn):
         yum.YumBase.__init__(self)
diff --git a/preupgrade/dev.py b/preupgrade/dev.py
index bd6cdea..905e01a 100644
--- a/preupgrade/dev.py
+++ b/preupgrade/dev.py
@@ -15,6 +15,7 @@
 # Written by skvidal@fedoraproject.org, wwoods@redhat.com
 
 import os
+from preupgrade.error import PUError
 
 def st_dev_to_devicename(st_dev):
     '''Try to convert st_dev to a devicename by reading /proc/partitions.
diff --git a/preupgrade/error.py b/preupgrade/error.py
new file mode 100644
index 0000000..f2ffb7d
--- /dev/null
+++ b/preupgrade/error.py
@@ -0,0 +1,24 @@
+# This program is free software; you can redistribute it and/or modify
+# it under the terms of the GNU General Public License as published by
+# the Free Software Foundation; either version 2 of the License, or
+# (at your option) any later version.
+#
+# This program is distributed in the hope that it will be useful,
+# but WITHOUT ANY WARRANTY; without even the implied warranty of
+# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+# GNU Library General Public License for more details.
+#
+# You should have received a copy of the GNU General Public License
+# along with this program; if not, write to the Free Software
+# Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.
+# (c) 2009 Red Hat, Inc.
+# Written by wwoods@redhat.com
+
+# Error classes for preupgrade
+
+class PUError(Exception):
+    def __init__(self, value=None):
+        Exception.__init__(self)
+        self.value = value
+    def __str__(self):
+        return "%s" %(self.value,)
-- 
1.6.2.2

